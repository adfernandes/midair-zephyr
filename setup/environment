# -*- mode: bash -*-

[[ -z ${HOME:-} ]] && export HOME=~andrew

export PROJECT_DIR="$(cd "$(dirname "$(dirname "${BASH_SOURCE[0]}")")" >/dev/null 2>&1 && pwd)"

export MACPORTS_ROOT="/opt/local"
export CONDA_ROOT="/opt/conda"

export PATH="${MACPORTS_ROOT}/libexec/gnubin:${MACPORTS_ROOT}/bin:${MACPORTS_ROOT}/sbin:${PATH}"

set +u
source "${CONDA_ROOT}/bin/activate" "zephyr"
set -u

export ZEPHYR_BASE="${PROJECT_DIR}/zephyr"

export ZEPHYR_TOOLCHAIN_VARIANT="gnuarmemb" # "zephyr" or "gnuarmemb"
unset  ZEPHYR_SDK_INSTALL_DIR # "${HOME}/Developer/Toolchains/zephyr-sdk-ng"
export GNUARMEMB_TOOLCHAIN_PATH="${HOME}/Developer/Toolchains/gcc-arm-none-eabi"

export PATH="${HOME}/Developer/Nordic/Tools/Default/mergehex:${PATH}"
export PATH="${HOME}/Developer/Nordic/Tools/Default/nrfjprog:${PATH}"
export PATH="${PROJECT_DIR}/zephyr/scripts:${PATH}"

export ZEPHYR_TOOLCHAIN_VARIANT="gnuarmemb" # "zephyr" or "gnuarmemb"
unset  ZEPHYR_SDK_INSTALL_DIR # "${HOME}/Developer/Toolchains/zephyr-sdk-ng"
export GNUARMEMB_TOOLCHAIN_PATH="${HOME}/Developer/Toolchains/gcc-arm-none-eabi"

export PATH="${HOME}/Developer/Nordic/Tools/Default/nrfjprog:${PATH}"
export PATH="${HOME}/Developer/Nordic/Tools/Default/mergehex:${PATH}"

unset  ZEPHYR_MODULES                       # because we are not using west-management
export WEST_DIR="${PROJECT_DIR}/.west/west" # so ninja can use west to flash and debug

source "${PROJECT_DIR}/zephyr/zephyr-env.sh"

# done
